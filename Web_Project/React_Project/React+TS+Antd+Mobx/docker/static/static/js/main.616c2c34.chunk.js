(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[5],{137:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var i=n(57),a=function(e){return Object(i.a)({url:"/admin/login",method:"POST",data:e})},r=function(){return Object(i.a)({url:"/admin/admin/info",method:"get"})}},147:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var i=n(57),a=function(){return Object(i.a)({url:"/admin/permission/list"})},r=function(){return Object(i.a)({url:"/admin/admin/permission"})}},171:function(e,t,n){},173:function(e,t,n){},196:function(e,t,n){"use strict";n.r(t);var i,a,r,c,o,s,l,u,j,d,b,h,p,m,O,f=n(107),x=n(0),g=n(19),v=n.n(g),y=n(27),w=n(37),S=n(39),k=n(38),P=n(52),z=n(15),M=n(203),F=n(204),C=n(205),K=n(206),N=n(4),L=Object(x.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,460))})),A=Object(x.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(3),n.e(8),n.e(17)]).then(n.bind(null,482))})),I=Object(x.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(11)]).then(n.bind(null,476))})),T=Object(x.lazy)((function(){return Promise.all([n.e(4),n.e(13)]).then(n.bind(null,462))})),D=Object(x.lazy)((function(){return Promise.all([n.e(4),n.e(14)]).then(n.bind(null,463))})),E=Object(x.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(12),n.e(15)]).then(n.bind(null,479))})),H=Object(x.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(9)]).then(n.bind(null,478))})),B=Object(x.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(16)]).then(n.bind(null,472))})),J=[{id:"1-0",path:"/admin/index",title:"\u4eea\u8868\u76d8",isMenu:1,icon:Object(N.jsx)(M.a,{}),component:Object(N.jsx)(A,{})},{id:"2-0",path:"/admin/user",title:"\u7528\u6237\u7ba1\u7406",icon:Object(N.jsx)(F.a,{}),routes:[{id:"2-1",path:"/admin/user/list",title:"\u7528\u6237\u5217\u8868",icon:Object(N.jsx)(F.a,{}),component:Object(N.jsx)(I,{})}]},{id:"3-0",path:"/admin/role",title:"\u89d2\u8272\u7ba1\u7406",icon:Object(N.jsx)(C.a,{}),routes:[{id:"3-1",path:"/admin/role/list",title:"\u89d2\u8272\u5217\u8868",icon:Object(N.jsx)(C.a,{}),component:Object(N.jsx)(E,{})}]},{id:"4-0",path:"/admin/admin",title:"\u7ba1\u7406\u5458\u7ba1\u7406",icon:Object(N.jsx)(K.a,{}),routes:[{id:"4-1",path:"/admin/admin/list",title:"\u7ba1\u7406\u5458\u5217\u8868",icon:Object(N.jsx)(K.a,{}),component:Object(N.jsx)(H,{})}]}],U=[],q=[].concat(J,U),R=[{id:"0-0",exact:!0,path:"/login",title:"\u767b\u5f55",isMenu:1,component:Object(N.jsx)(L,{})},{id:"01-0",exact:!0,path:"/config",title:"\u914d\u7f6e",isMenu:1,component:Object(N.jsx)(B,{})},{id:"403-0",exact:!0,path:"/403",title:"403",isMenu:1,component:Object(N.jsx)(T,{})},{id:"404-0",path:"*",title:"404",isMenu:1,component:Object(N.jsx)(D,{})}],G=n(102),Q=n(207),V=n(208),W=n(201),X=n(117),Y=n(36),Z=n(198),$=n(197),_=n(202),ee=n(199),te=W.a.Header,ne=Object(Y.b)("admin","permission")(i=Object(Y.c)(i=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(y.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).logout=function(){var t,n;null===(t=e.props.admin)||void 0===t||t.logout(),null===(n=e.props.permission)||void 0===n||n.changeState("loading"),e.props.history.replace("/login")},e}return Object(w.a)(n,[{key:"render",value:function(){var e,t,n;return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(te,{className:"header",children:[Object(N.jsx)(Z.a,{overlay:Object(N.jsx)($.a,{children:Object(N.jsx)($.a.Item,{onClick:this.logout,children:"\u9000\u51fa"},"1")}),className:"admin",children:Object(N.jsxs)("div",{children:[Object(N.jsx)(_.a,{src:null===(e=this.props.admin)||void 0===e||null===(t=e.admin)||void 0===t?void 0:t.avatar}),Object(N.jsx)("span",{className:"admin-name",children:null===(n=this.props.admin)||void 0===n?void 0:n.admin.name}),Object(N.jsx)(ee.a,{})]})}),Object(N.jsx)($.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["5-0"],children:U.map((function(e){return Object(N.jsx)($.a.Item,{children:Object(N.jsx)(P.b,{to:e.path,children:e.title})},e.id)}))})]})})}}]),n}(x.Component))||i)||i,ie=Object(z.g)(ne),ae=(n(171),function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(y.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={defaultKeys:[],defaultOpenKeys:[],height:0},e.highLightMenu=function(t,n){var i=e.props.history.location.pathname;null===t||void 0===t||t.forEach((function(t){null===Object(z.f)(i,{path:t.path,exact:!0,strict:!1})?e.highLightMenu(null===t||void 0===t?void 0:t.routes,t):n?e.setState({defaultKeys:[t.id],defaultOpenKeys:[n.id]}):e.setState({defaultKeys:[t.id]})}))},e.generateMenu=function(t){return Object(N.jsx)(N.Fragment,{children:null===t||void 0===t?void 0:t.filter((function(t){return e.props.permissionSet.has(t.path)})).map((function(t){return t.routes?Object(N.jsx)($.a.SubMenu,{title:Object(N.jsxs)("span",{children:[t.icon,Object(N.jsx)("span",{children:t.title})]}),children:e.generateMenu(t.routes)},t.id):Object(N.jsx)($.a.Item,{icon:t.icon,children:Object(N.jsx)(P.b,{to:t.path,children:t.title})},t.id)}))})},e.getTitle=function(t,n){var i,a=Object(G.a)(n);try{for(a.s();!(i=a.n()).done;){var r=i.value,c=Object(z.f)(t,{path:r.path,exact:r.exact});if(null!==c){!c.isExact&&r.routes?e.getTitle(t,r.routes):document.title=r.title;break}r.routes&&e.getTitle(t,r.routes)}}catch(o){a.e(o)}finally{a.f()}},e}return Object(w.a)(n,[{key:"componentDidMount",value:function(){this.highLightMenu(q),this.setState((function(){return{height:document.body.clientHeight-62}}))}},{key:"shouldComponentUpdate",value:function(e,t,n){return this.getTitle(e.location.pathname,J),!0}},{key:"render",value:function(){return Object(N.jsxs)("div",{style:{minHeight:this.state.height+"px"},children:[Object(N.jsx)("div",{className:"logo"}),this.state.defaultKeys.length>0?Object(N.jsx)($.a,{theme:"dark",mode:"inline",defaultSelectedKeys:this.state.defaultKeys,defaultOpenKeys:this.state.defaultOpenKeys,children:this.generateMenu(J)}):null]})}}]),n}(x.Component)),re=Object(z.g)(ae),ce=W.a.Sider,oe=W.a.Content,se=W.a.Footer,le=Object(Y.b)("permission")(a=Object(Y.c)(a=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e,i){var a;return Object(y.a)(this,n),(a=t.call(this,e,i)).toggle=function(){a.setState({collapsed:!a.state.collapsed})},a.state={collapsed:!1,auth:!1,permissionSet:new Set},a}return Object(w.a)(n,[{key:"render",value:function(){var e;return"loading"===(null===(e=this.props.permission)||void 0===e?void 0:e.state)?Object(N.jsx)(N.Fragment,{children:"loading"}):Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(W.a,{children:[Object(N.jsx)(ie,{}),Object(N.jsxs)(W.a,{children:[Object(N.jsx)(ce,{trigger:null,collapsible:!0,collapsed:this.state.collapsed,children:Object(N.jsx)(re,{permissionSet:this.state.permissionSet})}),Object(N.jsxs)(W.a,{className:"site-layout",children:[Object(N.jsx)("span",{className:"trigger",onClick:this.toggle,children:this.state.collapsed?Object(N.jsx)(Q.a,{}):Object(N.jsx)(V.a,{})}),Object(N.jsx)(oe,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:280},children:this.props.children}),Object(N.jsx)(se,{className:"footer"})]})]})]})})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,i;if("error"===(null===(n=e.permission)||void 0===n?void 0:n.state))return X.b.error("error"),e.history.replace("/login"),null;if("success"===(null===(i=e.permission)||void 0===i?void 0:i.state)){var a,r,c=new Set,o=!1,s=Object(G.a)(null===(a=e.permission)||void 0===a?void 0:a.permission);try{for(s.s();!(r=s.n()).done;){var l=r.value,u=Object(z.f)(e.location.pathname,{path:l.path});null!==u&&u.isExact&&(o=!0),c.add(l.path)}}catch(j){s.e(j)}finally{s.f()}return 0===c.size?(e.history.replace("/login"),null):o?{permissionSet:c,auth:o}:(e.history.push("/admin/index"),null)}return null}}]),n}(x.Component))||a)||a,ue=Object(z.g)(le),je=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(P.a,{children:Object(N.jsxs)(z.d,{children:[Object(N.jsx)(z.b,{path:"/",exact:!0,children:Object(N.jsx)(z.a,{to:"/admin/index"})}),Object(N.jsx)(z.b,{path:"/admin",children:Object(N.jsx)(z.d,{children:Object(N.jsx)(ue,{children:Object(N.jsx)(x.Suspense,{fallback:Object(N.jsx)(N.Fragment,{}),children:q.map((function(e){return e.routes?Object(N.jsx)("div",{children:e.routes.map((function(e){return Object(N.jsx)(z.b,{path:e.path,exact:e.exact,children:e.component},e.id)}))},e.id):Object(N.jsx)(z.b,{path:e.path,exact:e.exact,children:e.redirect?Object(N.jsx)(z.a,{to:e.redirect,from:e.path}):e.component},e.id)}))})})})}),Object(N.jsx)(x.Suspense,{fallback:Object(N.jsx)(N.Fragment,{}),children:Object(N.jsx)(z.d,{children:R.map((function(e){return Object(N.jsx)(z.b,{path:e.path,exact:e.exact,children:e.component},e.id)}))})})]})})})}}]),n}(x.Component),de=(n(172),n(173),Object(Y.b)("permission","admin")(r=Object(Y.c)(r=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"componentDidMount",value:function(){var e,t;null===(e=this.props.admin)||void 0===e||e.initAdmin(),null===(t=this.props.permission)||void 0===t||t.initPermission()}},{key:"render",value:function(){return Object(N.jsx)("div",{className:"App",children:Object(N.jsx)(je,{})})}}]),n}(x.Component))||r)||r),be=function(e){e&&e instanceof Function&&n.e(18).then(n.bind(null,464)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),r(e),c(e)}))},he=n(68),pe=n.n(he),me=n(101),Oe=n(33),fe=n(34),xe=(n(136),n(8)),ge=n(76),ve=n(137),ye=(c=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"",avatar:"",password:""};Object(y.a)(this,e),Object(Oe.a)(this,"admin",o,this),Object(Oe.a)(this,"state",s,this),Object(Oe.a)(this,"initAdmin",l,this),Object(Oe.a)(this,"logout",u,this),Object(Oe.a)(this,"login",j,this),this.admin=t,Object(xe.m)(this)},o=Object(fe.a)(c.prototype,"admin",[xe.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{name:"",avatar:"",password:""}}}),s=Object(fe.a)(c.prototype,"state",[xe.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"loading"}}),l=Object(fe.a)(c.prototype,"initAdmin",[xe.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(me.a)(pe.a.mark((function t(){var n;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ve.a)().then((function(e){return e.data.data}));case 3:n=t.sent,Object(xe.p)((function(){e.admin=Object(xe.o)(n)})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),Object(xe.p)((function(){e.state="error"}));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))}}),u=Object(fe.a)(c.prototype,"logout",[xe.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.admin={name:"",avatar:"",password:""},Object(ge.a)()}}}),j=Object(fe.a)(c.prototype,"login",[xe.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.admin=t}}}),c),we=n(147),Se=(d=function e(){Object(y.a)(this,e),Object(Oe.a)(this,"permission",b,this),Object(Oe.a)(this,"state",h,this),Object(Oe.a)(this,"initPermission",p,this),Object(Oe.a)(this,"changeState",m,this),Object(Oe.a)(this,"getPermissionList",O,this),Object(xe.m)(this)},b=Object(fe.a)(d.prototype,"permission",[xe.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=Object(fe.a)(d.prototype,"state",[xe.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"loading"}}),p=Object(fe.a)(d.prototype,"initPermission",[xe.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(me.a)(pe.a.mark((function t(){var n;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(we.a)().then((function(e){return e.data.data}));case 3:n=t.sent,Object(xe.p)((function(){e.permission=xe.o.array(n),e.state="success"})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Object(xe.p)((function(){e.state="error"}));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))}}),m=Object(fe.a)(d.prototype,"changeState",[xe.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.state=t}}}),O=Object(fe.a)(d.prototype,"getPermissionList",[xe.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return e.permission}}}),d),ke={admin:new ye,permission:new Se},Pe=n(17),ze=n(156),Me=n.n(ze),Fe=n(112),Ce=n.n(Fe);n(191);Ce.a.locale("cn"),v.a.render(Object(N.jsx)(Y.a,Object(f.a)(Object(f.a)({},ke),{},{children:Object(N.jsx)(Pe.a,{locale:Me.a,children:Object(N.jsx)(de,{})})})),document.getElementById("root")),be()},57:function(e,t,n){"use strict";var i=n(155),a=n.n(i),r=n(117),c=n(160),o=n(82),s=n.n(o),l=n(76),u=a.a.create({baseURL:"http://127.0.0.1:886",timeout:5e3});u.interceptors.request.use((function(e){return s.a.start(),e.headers.Authorization=Object(l.b)("token"),e}),(function(e){return s.a.done(),Promise.reject(e)})),u.interceptors.response.use((function(e){if(s.a.done(),200===e.status){var t=e.data.code;return 4003===t?(r.b.warning("\u4f60\u7684\u767b\u5f55\u72b6\u6001\u5df2\u7ecf\u4e22\u5931\uff0c\u8bf7\u9000\u51fa\u540e\u91cd\u65b0\u767b\u5f55\uff01"),Promise.reject("\u8bf7\u767b\u5f55")):4e3===t?(Object(l.a)(),Promise.reject("\u8ba4\u8bc1\u5931\u8d25")):e}return c.a.error({title:"\u7f51\u7edc\u8bf7\u6c42\u9519\u8bef"}),Promise.reject("\u7f51\u7edc\u8bf7\u6c42\u9519\u8bef")}),(function(e){return c.a.error({title:"\u7f51\u7edc\u8bf7\u6c42\u9519\u8bef"}),s.a.done(),Promise.reject(e)})),t.a=u},76:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r}));var i=function(e){return localStorage.getItem(e)},a=function(e,t){return localStorage.setItem(e,t)},r=function(){return localStorage.clear()}}},[[196,6,7]]]);
//# sourceMappingURL=main.616c2c34.chunk.js.map